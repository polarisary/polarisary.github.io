<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>HTTP协议简介 | 默刀</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-113714645-1','auto');ga('send','pageview');</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">HTTP协议简介</h1><a id="logo" href="/.">默刀</a><p class="description">Study as if you were to live forever, live as if you were to die tomorrow.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">HTTP协议简介</h1><div class="post-meta">Feb 2, 2018<span> | </span><span class="category"><a href="/categories/HTTP/">HTTP</a></span></div><div class="post-content"><p><strong> 首先了解下TCP/IP四层模型： </strong></p>
<ul>
<li>应用层<br>a. HTTP<br>b. FTP<br>c. DNS<br>d. …</li>
<li>传输层:保证可靠传输<br>a. TCP<br>b. UDP</li>
<li>网络层</li>
<li>链路层</li>
</ul>
<p>下面这张图显示了HTTP请求的大概流程：<br><img src="/2018/02/02/http/1.png" alt="HTTP请求处理流程"><br>图中清楚的展示了请求的处理流程，请求到达每一层都会加上响应的头部信息；返回则层次去掉的过程；<br>传输层的TCP协议保证了数据的可靠传输，采用分段的方式传输报文；</p>
<p><strong> TCP的可靠性保证：</strong></p>
<ul>
<li>连接时三次握手</li>
</ul>
<p><strong> 三次握手过程： </strong></p>
<ul>
<li>客户端发送带有SYN的连接请求到服务器端</li>
<li>服务器端接受到客户端的连接请求后，发送带有SYN/ACK的连接请求收到的确认信息</li>
<li>客户端收到服务端发送过来的请求确认后，再次发送服务端发送的确认信息收到的确认。此时连接建立；</li>
</ul>
<p><strong> HTTP无状态特性：</strong> 保证可以快速处理更多事务，确保协议可伸缩性；但是有些场景需要保持用户的状态（如电商网站的登录状态，所以引入了cookie；</p>
<p><strong> 持久连接（keep-alive）</strong> 目前的HTTP1.1默认是持久连接的，即在多次请求中只有第一次是经过三次握手建立TCP连接的，直到有一端明确提出端口连接为止；<br>在此持久连接的基础，可以支持并行发送多个请求，让整个请求时间减少；</p>
<p><strong> Cookie： </strong> </p>
<ol>
<li>客户端向服务端发送请求；</li>
<li>服务端生成cookie，并返回cookie 和 请求数据信息 给客户端</li>
<li>客户端接收到服务端发送过来的数据后，接下来的请求中会携带cookie信息和请求信息，服务端就可以根据cookie信息来判断是哪个客户端；<br>Range：范围请求，客户端只请求指定的一部分数据<br>Range：bytes=3000-5000<br>服务器返回206，partial content的响应报文</li>
</ol>
<p><strong> Http报文 </strong><br>包括：报文首部，报文主体</p>
<ul>
<li>报文首部：<ul>
<li>通用首部字段<ul>
<li>cache-control</li>
<li>connection</li>
<li>…</li>
</ul>
</li>
<li>请求首部字段<ul>
<li>Accept</li>
<li>Accept-Charset</li>
<li>Accept-Encoding</li>
<li>User-Agent</li>
<li>Range</li>
<li>Authorization</li>
<li>…</li>
</ul>
</li>
<li>响应首部字段<ul>
<li>Accept-Ranges</li>
<li>ETag</li>
<li>Server</li>
<li>…</li>
</ul>
</li>
<li>实体首部字段<ul>
<li>Content-Encoding</li>
<li>Content-Language</li>
<li>Content-Type</li>
<li>Content-Range</li>
<li>…</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong> Http缺点 </strong></p>
<ol>
<li>明文传输不安全，内容可能被窃听</li>
<li>不验证通讯方身份，有可能遭遇伪装</li>
<li>无法判断报文是否完整，有可能被篡改</li>
</ol>
<p><strong> Https是Http通过和SSL或TSL组合加密的协议 </strong><br><img src="/2018/02/02/http/2.png" alt="HTTP&amp;HPPS协议流程"></p>
<p><strong> HTTPS（SSL) 加密方式对比：</strong></p>
<ol>
<li>公开密钥加密思路：使用两个密钥，一个公钥，一个私钥，用户使用服务端的公开密钥加密数据包，然后发送到服务器端，服务端接收到数据包后，使用自己的私钥解密。这样即使数据包被窃取，由于没有解密的私钥，内容也不会被看到；</li>
<li>共享密钥加密思路：解密和解密使用同一个密钥解密，这样密钥需要在客户端和服务端之间传递，才能到达解密的目的。传输密钥的过程可能被窃取，数据就可能被窃取到了；</li>
</ol>
<p>Https是综合了公开密钥加密和共享密钥加密机制; 由于<strong>公开密钥加密速度慢，但安全；共享密钥加密速度快，但密码可能被窃取</strong>；<br>所以HTTP结合两者优缺点，<strong>在共享密钥传输密码阶段使用公开密钥加密，保证共享密钥的安全；之后的数据传输采用共享密钥加密的机制；</strong></p>
</div><div class="tags"><a href="/tags/HTTP/">HTTP</a><a href="/tags/TCP-IP/">TCP/IP</a><a href="/tags/加密/">加密</a></div><div class="post-nav"><a class="pre" href="/2018/02/08/python-web/">Python Web流程</a><a class="next" href="/2018/01/31/MySQL索引补充/">MySQL单列索引和多列索引</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=0.0.0"><script src="/js/gitment.browser.js?v=0.0.0"></script><script>var gitment = new Gitment({
  owner: 'polarisary',
  repo: 'polarisary.github.io',
  oauth: {
    client_id: 'cc1c26fba7cb369cd10b',
    client_secret: '3300c5f614b65a2505151ad18b7268ac0997986b',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><iframe width="100%" height="120" style="margin-bottom: 20px;" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=400&fansRow=1&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=2029904011&verifier=8ceb4535&dpc=1"></iframe><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://polarisary.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP/">HTTP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unity/">Unity</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/分布式/">分布式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/总结/" style="font-size: 15px;">总结</a> <a href="/tags/多列索引/" style="font-size: 15px;">多列索引</a> <a href="/tags/单列索引/" style="font-size: 15px;">单列索引</a> <a href="/tags/MVCC/" style="font-size: 15px;">MVCC</a> <a href="/tags/B-Tree/" style="font-size: 15px;">B-Tree</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/TCP-IP/" style="font-size: 15px;">TCP/IP</a> <a href="/tags/加密/" style="font-size: 15px;">加密</a> <a href="/tags/分布式/" style="font-size: 15px;">分布式</a> <a href="/tags/系统设计/" style="font-size: 15px;">系统设计</a> <a href="/tags/pip/" style="font-size: 15px;">pip</a> <a href="/tags/打包/" style="font-size: 15px;">打包</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Web/" style="font-size: 15px;">Web</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/冒泡/" style="font-size: 15px;">冒泡</a> <a href="/tags/unity/" style="font-size: 15px;">unity</a> <a href="/tags/shader/" style="font-size: 15px;">shader</a> <a href="/tags/渲染流水线/" style="font-size: 15px;">渲染流水线</a> <a href="/tags/光照模型/" style="font-size: 15px;">光照模型</a> <a href="/tags/快排/" style="font-size: 15px;">快排</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/TC/" style="font-size: 15px;">TC</a> <a href="/tags/QOS/" style="font-size: 15px;">QOS</a> <a href="/tags/Zen/" style="font-size: 15px;">Zen</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/04/13/pangu/">阿里云分布式存储系统的研究与分享</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/27/tc/">Linux TC限流</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/08/python-web/">Python Web流程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/02/http/">HTTP协议简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/31/MySQL索引补充/">MySQL单列索引和多列索引</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/23/MySql索引/">MySql索引</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/22/MySql概述/">MySql概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/06/mysql-lock/">mysql_lock</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/02/2017年度总结/">2017年度总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/29/shader/">Shader渲染流水线</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://coolshell.cn/" title="CoolShell" target="_blank">CoolShell</a><ul></ul><a href="http://ifeve.com/" title="并发编程" target="_blank">并发编程</a><ul></ul><a href="http://www.raychase.net/" title="四火的唠叨" target="_blank">四火的唠叨</a><ul></ul><a href="http://blog.chenpeng.info/" title="陈鹏个人博客" target="_blank">陈鹏个人博客</a><ul></ul><a href="http://www.coderli.com/" title="OneCoder" target="_blank">OneCoder</a><ul></ul><a href="http://vimer.me/" title="Vimer.me" target="_blank">Vimer.me</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">默刀.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>